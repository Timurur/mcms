<!DOCTYPE html>
<html>
<head>
    <title>Создание Олимпиады</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>

    <script>
        var questionCounter=0;
        function addQuestion() {
            questionCounter++;
            document.getElementById("deleteQuestion").style="display:block";
           var div= document.createElement('div');
           div.innerHTML=document.getElementById("questionBlueprint").innerHTML;
           div.id="question"+questionCounter;
           var pointer=document.getElementById("questionList");
           pointer.append(div);
           div.children['questionHeader'].innerHTML="Задание № "+questionCounter;
        }
        function delQuestion(){
            var pointer=document.getElementById("questionList");
            pointer.removeChild(pointer.lastChild);
            questionCounter--;
            if(questionCounter==0){
                document.getElementById("deleteQuestion").style="display:none";
            }
        }

        function initializeVariantsTable(id,variantsNumber,variablesNumber) {
            if(variantsNumber==""||variablesNumber==""){
                alert("Введите количество переменных и варантов!");
                return;
            }
            var pointer=document.getElementById(id);
            var table=document.createElement("table");
            var thead=document.createElement("thead");
            var tbody=document.createElement("tbody");
            table.append(thead);
            table.append(tbody);
            table.setAttribute("name","varTable");

            var headerRow=document.createElement("tr");
            var cornerHeader=document.createElement('th');
            cornerHeader.innerHTML="Вариант/Переменные";
            cornerHeader.style.maxWidth="80px";
            headerRow.append(cornerHeader);
            for(var i=1;i<=variablesNumber;i++){
                var variableCell=document.createElement("th");
                var variableName=document.createElement("input");
                variableName.setAttribute("name","variableName");
                variableName.setAttribute("pattern","[A-Za-z]{3}");
                variableName.setAttribute("style","width:50px;");

                variableCell.append(variableName);
                headerRow.append(variableCell);
            }
            var ansHeader=document.createElement("th");
            ansHeader.innerHTML="Ответ";
            headerRow.append(ansHeader);
            thead.append(headerRow);

            for(var j=1;j<=variantsNumber;j++){

              var variantRow=document.createElement('tr');
              var variantHeader=document.createElement('th');
              variantHeader.innerHTML=j;
              variantRow.append(variantHeader);
              for(var k=0;k<variablesNumber;k++){
                  var variantVariableCell=document.createElement("td");
                  var variantVariableValue=document.createElement('input');
                  variantVariableValue.setAttribute("name","variableValue");
                  variantVariableValue.setAttribute("pattern","[0-9]{3}");
                  variantVariableValue.setAttribute("style","width:50;");
                  variantVariableCell.append(variantVariableValue);
                  variantRow.append(variantVariableCell);
              }
              var variantAnswer=document.createElement('td');
                var variantAnswerValue=document.createElement('input');
                variantAnswer.appendChild(variantAnswerValue);
                variantRow.append(variantAnswer);
                tbody.append(variantRow);
            }
pointer.append(table);
        }
    </script>
    <link rel="stylesheet" href="css/OlympiadCreation.css">
</head>
<body>
<div class="Header">
    <h1>MCMS Admin Access</h1>
</div>
<div>
    <form>
        <label>Введите название олимпиады:</label>
        <input type="text" id="OlympName" required width="300"><br>

        <label>Введите класс:</label>
        <input type="number" id="OlympGrade" min="1" max="11" maxlength="2" required width="300"><br>

        <label>Введите периодичность обновления(в часах):</label>
        <input type="number" id="OlympFreq" min="1" max="24" maxlength="2" required width="300"><br>

        <label>Введите SQL запрос для обновления:</label>
        <input type="text" id="OlympSQL" required width="300"><br>

        <label>Введите дату начала: </label>
        <input type="date" id="OlympStartDate" required><br>

        <label>Введите время начала:</label>
        <input type="time" id="OlympStartTime" required><br>

        <label>Введите дату конца олимпиады:</label>
        <input type="date" id="OlympEndDate" required><br>

        <label>Введите время конца олимпиады:</label>
        <input type="date" id="OlympEndTime" required><br>
        <hr>
        <button type="button"  onclick="addQuestion()">Добавить задание</button>
        <button type="button" id="deleteQuestion" style="display: none" onclick="delQuestion()">Удалить задание</button>
        <div id="questionList">
           <!-- <div id="question1">
                <h4 name="questionHeader">Задание № 1</h4>
                <label>Вставьте порядковый номер задания:</label>
                <input type="number" name="QuestionNumber" maxlength="2" required width="300"><br>

                <label>Вставьте Tex код:</label><br>
                <textarea required name="TexCode" style="width: 300px;height:200px;resize: none"></textarea><br>

                <label>Количество вариантов:</label>
                <input name="variantsNumber" type="number" maxlength="2" min="1" max="15"><br>
                <label>Количество переменных в задании</label>
                <input name="variablesNumber" type="number" maxlength="2" min="1" max="15"><br>
                <button type="button" onclick="initializeVariantsTable(this.parentNode.id,this.parentNode.children['variantsNumber'].value,this.parentNode.children['variablesNumber'].value)">Заполнить варианты</button>
                <div name="variantsTable" style="display: block;">

                </div>
                <hr>
            </div>-->
        </div>
    </form>
    <div id="questionBlueprint" style="display:none;">
        <h4 name="questionHeader">Задание</h4>
        <label>Вставьте порядковый номер задания:</label>
        <input type="number" name="QuestionNumber" maxlength="2" required width="300"><br>

        <label>Вставьте Tex код:</label><br>
        <textarea required name="TexCode" style="width: 300px;height:200px;resize: none"></textarea><br>

        <label>Количество вариантов:</label>
        <input name="variantsNumber" type="number" maxlength="2" min="1" max="15"><br>

        <label>Количество переменных в задании</label>
        <input name="variablesNumber" type="number" maxlength="2" min="1" max="15"><br>

        <button type="button" onclick="initializeVariantsTable(this.parentNode.id,this.parentNode.children['variantsNumber'].value,this.parentNode.children['variablesNumber'].value)">Заполнить варианты</button>
        <div name="variantsTable" style="display: block;">

        </div>

    </div>
</div>
</body>
